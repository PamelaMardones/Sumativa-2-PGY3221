{% extends 'core/home.html' %}
{%load static %}
{% block content %}
{%load format_amount%}

<div class="container">
    <div class="row">
      <div class="col-12">
        <h1 class="text-center">Carrito de compras</h1>
      </div>
    </div>
    
    <div class="row">
      <div class="col-12">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Producto</th>
              <th>Cantidad</th>
              <th>Precio</th>
              <th>Subtotal</th>
              <th>Eliminar</th>
            </tr>
          </thead>
          <tbody>
            {% for item in cart.products %}
            <tr>
              <td> 
                <img src="{{ item.image }}" alt="{{ item.name }}" width="100" height="100">
                {{ item.name }}
              </td>
              <td class="align-middle text-center">{{ item.qty }}</td>
              <td class="align-middle text-right">{{ item.unit_price|format_amount }}</td>
              <td class="align-middle text-right">{{ item.total_price|format_amount }}</td>
              <td class="align-middle text-right">
                <!-- a href to remove_from_cart with cart.cart_id ad item.id-->
                <a href="{% url 'remove_from_cart' cart.cart_id item.id %}" class="btn btn-danger">
                  <i class="fas fa-trash-alt"></i>
                </a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
            <tfoot>
                <tr>
                <td colspan="3" class="text-right">Total</td>
                <td colspan="1" class="text-right">{{ cart.total|format_amount }}</td>
                </tr>
            </tfoot>
        </table>
      </div>

    <form action="{% url 'checkout' cart.cart_id %}" method="POST">
      {% csrf_token %}
        <div class="col-12">
            <button type="submit" class="btn btn-outline-primary">Pagar</button>
        </div>
    </form>
  </div>
</div>

<br>

{% endblock %}